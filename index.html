<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NeuroMind AI - Advanced Memory Chatbot</title>

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="app-container">
      <!-- ================= HEADER ================= -->
      <header class="app-header">
        <div class="header-content">
          <div class="logo">
            <i class="fas fa-brain"></i>
            <span>NeuroMind AI</span>
          </div>
          <div class="header-controls">
            <button id="theme-toggle" class="control-btn" title="Toggle Theme">
              <i class="fas fa-moon"></i>
            </button>
            <button id="settings-btn" class="control-btn" title="Settings">
              <i class="fas fa-cog"></i>
            </button>
            <button id="export-btn" class="control-btn" title="Export Chat">
              <i class="fas fa-download"></i>
            </button>
          </div>
        </div>

        <div class="status-bar">
          <span class="status-indicator online">
            <i class="fas fa-circle"></i> Online
          </span>
          <span class="memory-count">
            <i class="fas fa-database"></i>
            <span id="memory-count">0</span> memories stored
          </span>
        </div>
      </header>

      <!-- ================= MAIN CONTENT ================= -->
      <div class="main-content">
        <!-- ================= CHAT ================= -->
        <div class="chat-section">
          <div class="chat-header">
            <h2>Conversation</h2>
            <div class="chat-stats">
              <span id="message-count">0 messages</span>
            </div>
          </div>

          <div id="chat-messages" class="chat-messages">
            <div class="welcome-message">
              <div class="welcome-icon">
                <i class="fas fa-robot"></i>
              </div>
              <h3>Welcome to NeuroMind AI</h3>
              <p>
                I use episodic, semantic, and short-term memory to reason.
                You can see the exact context used for every response.
              </p>
              <div class="capabilities">
                <div class="capability">
                  <i class="fas fa-history"></i>
                  <span>Episodic Memory</span>
                </div>
                <div class="capability">
                  <i class="fas fa-brain"></i>
                  <span>Semantic Memory</span>
                </div>
                <div class="capability">
                  <i class="fas fa-code"></i>
                  <span>Context Transparency</span>
                </div>
              </div>
            </div>
          </div>

          <!-- ================= INPUT ================= -->
          <div class="input-section">
            <div class="input-container">
              <div class="input-wrapper">
                <textarea
                  id="message-input"
                  placeholder="Type your message here..."
                  rows="1"
                  autocomplete="off"
                ></textarea>
                <button id="voice-btn" class="input-btn" title="Voice Input">
                  <i class="fas fa-microphone"></i>
                </button>
              </div>
              <button id="send-button" class="send-btn">
                <i class="fas fa-paper-plane"></i>
                <span>Send</span>
              </button>
            </div>

            <div class="input-footer">
              <span class="typing-status" id="typing-status"></span>
              <span class="char-count">
                <span id="char-count">0</span>/2000
              </span>
            </div>
          </div>
        </div>

        <!-- ================= SIDEBAR ================= -->
        <div class="sidebar">
          <!-- MEMORY INSIGHTS -->
          
          <!-- CONTEXT USED (NEW) -->
          <div class="sidebar-section">
            <div class="section-header">
              <h3><i class="fas fa-code"></i> Context Used</h3>
              <button class="collapse-btn" data-target="context-panel">
                <i class="fas fa-chevron-up"></i>
              </button>
            </div>
            <div id="context-panel" class="section-content">
              <pre
                id="context-content"
                style="
                  background: #0f172a;
                  color: #e5e7eb;
                  font-size: 12px;
                  padding: 12px;
                  border-radius: 8px;
                  max-height: 300px;
                  overflow-y: auto;
                  white-space: pre-wrap;
                "
              >
Send a message to see the full context used for the response
              </pre>
            </div>
          </div>

          <!-- ANALYTICS -->
          <div class="sidebar-section">
            <div class="section-header">
              <h3><i class="fas fa-chart-line"></i> Analytics</h3>
              <button class="collapse-btn" data-target="analytics">
                <i class="fas fa-chevron-up"></i>
              </button>
            </div>
            <div id="analytics" class="section-content">
              <div class="metric">
                <span class="metric-label">Response Time</span>
                <span class="metric-value" id="response-time">--</span>
              </div>
              <div class="metric">
                <span class="metric-label">Memory Hits</span>
                <span class="metric-value" id="memory-hits">0</span>
              </div>
              <div class="metric">
                <span class="metric-label">Session Duration</span>
                <span class="metric-value" id="session-duration">00:00</span>
              </div>
            </div>
          </div>

          <!-- SETTINGS -->
          <div class="sidebar-section">
            <div class="section-header">
              <h3><i class="fas fa-cogs"></i> Settings</h3>
              <button class="collapse-btn" data-target="settings">
                <i class="fas fa-chevron-down"></i>
              </button>
            </div>
            <div id="settings" class="section-content collapsed">
              <div class="setting-group">
                <label>
                  <input type="checkbox" id="auto-scroll" checked />
                  Auto-scroll
                </label>
              </div>
              <div class="setting-group">
                <label>
                  <input type="checkbox" id="show-timestamps" checked />
                  Show timestamps
                </label>
              </div>
              <div class="setting-group">
                <label>
                  <input type="checkbox" id="sound-notifications" />
                  Sound notifications
                </label>
              </div>
              <div class="setting-group">
                <label>
                  Memory limit:
                  <select id="memory-limit">
                    <option value="3">3</option>
                    <option value="5">5</option>
                    <option value="10">10</option>
                  </select>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- MODALS -->
      <div id="settings-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Advanced Settings</h3>
            <button class="modal-close">&times;</button>
          </div>
          <div class="modal-body"></div>
        </div>
      </div>

      <!-- TOASTS -->
      <div id="toast-container" class="toast-container"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
